generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum MatchStatus {
  scheduled
  locked
  played
  canceled
}

enum Role {
  USER
  ADMIN
}

model User {
  id           String   @id @default(uuid()) @db.Uuid
  email        String   @unique
  passwordHash String
  role         Role     @default(USER)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  matches      Match[]
}

model Match {
  id          String      @id @default(uuid()) @db.Uuid
  title       String
  startsAt    DateTime
  capacity    Int
  status      MatchStatus @default(scheduled)
  revision    Int         @default(1)
  createdById String      @db.Uuid
  createdBy   User        @relation(fields: [createdById], references: [id])
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  @@index([createdById])
}
